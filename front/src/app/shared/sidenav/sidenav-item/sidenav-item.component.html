<div *ngIf="item.routeIsFunction(); else route"></div>

<!-- <ng-template #function>
  <a
    class="sidenav-item"
    [class.open]="isOpen(item)"
    matRipple
    (click)="(item.route)"
    fxLayout="row"
    fxLayoutAlign="start center"
    *ngIf="!item.hasSubItems()"
  >
    <span class="name" style="color: black">{{ item.name }}</span>
    <span fxFlex></span>
    <mat-icon class="icon" *ngIf="item.icon">{{ item.icon }}</mat-icon>
    <div class="letter-icon" *ngIf="item.hasParent()">
      {{ item.generateLetterIcon() }}
    </div>
  </a>
</ng-template> -->

<ng-template #route>
  <a
    class="sidenav-item"
    [class.open]="isOpen(item)"
    matRipple
    fxLayout="row"
    [routerLink]="item.route"
    routerLinkActive="active"
    [routerLinkActiveOptions]="{ exact: true }"
    fxLayoutAlign="start center"
    *ngIf="
      !item.hasSubItems() &&
      !login &&
      (item.name === 'Login' || item.name === 'Register')
    "
  >
    <span class="name" style="color: black">{{ item.name }}</span>
  </a>
  <a
    class="sidenav-item"
    [class.open]="isOpen(item)"
    matRipple
    fxLayout="row"
    fxLayoutAlign="start center"
    (click)="logoutHandler()"
    *ngIf="!item.hasSubItems() && login && item.name === 'Cerrar Sesión'"
  >
    <span class="name" style="color: black" click>{{ item.name }}</span>
  </a>
  <a
    class="sidenav-item"
    matRipple
    fxLayout="row"
    fxLayoutAlign="start center"
    *ngIf="
      !item.hasSubItems() &&
      item.name !== 'Cerrar Sesión' &&
      item.name !== 'Register' &&
      item.name !== 'Login'
    "
  >
    <span class="name" style="color: black">{{ item.name }}</span>
  </a>
</ng-template>

<a
  class="sidenav-item"
  [class.open]="isOpen(item)"
  matRipple
  (click)="toggleDropdown()"
  fxLayout="row"
  fxLayoutAlign="start center"
  *ngIf="item.hasSubItems()"
>
  <span class="name" style="color: black">{{ item.name }}</span>
  <span fxFlex></span>
  <mat-icon
    *ngIf="item.hasSubItems()"
    class="dropdown-indicator"
    [class.rotate]="isOpen(item)"
    style="color: black"
    >expand_more</mat-icon
  >
  <mat-icon class="icon" *ngIf="item.icon">{{ item.icon }}</mat-icon>
  <div class="letter-icon" *ngIf="item.hasParent()">
    {{ item.generateLetterIcon() }}
  </div>
</a>

<div
  class="sub-menu"
  [style.height]="getSubMenuHeight()"
  [ngClass]="getSubMenuItemsCount(item) > 0 ? '' : 'sub-item-display'"
>
  <elastic-sidenav-item
    class="sidenav-item-container"
    *ngFor="let subItem of item.subItems"
    [item]="subItem"
    [currentlyOpen]="currentlyOpen"
  ></elastic-sidenav-item>
</div>
